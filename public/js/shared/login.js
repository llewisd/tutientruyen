function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase())}function checkEmailValidate(){var e=document.querySelectorAll(".sign_window__block-signin .sign_window__alert div"),n=document.querySelector(".sign_window__block-signin .sign_window__support button:nth-child(2)"),t=document.querySelector(".sign_window__block-signin .sign_window__email-block input");""===t.value.trim()||isValidEmail(t.value)?(n.disabled=!1,e[0].style.display="none"):(n.disabled=!0,e[0].style.display="block",e[3].style.display="none")}function checkEmailValidateInForgetPassword(){var e=document.querySelectorAll(".forgetpassword_popup-alert div"),n=document.querySelector(".forgetpassword_popup-submit-btn button"),t=document.querySelector(".forgetpassword_popup-body input");""!==t.value.trim()?isValidEmail(t.value)?(n.disabled=!0,e[0].style.display="none"):(n.disabled=!0,e[0].style.display="block"):(n.disabled=!1,e[0].style.display="none"),e[1].style.display="none",e[2].style.display="none",e[3].style.display="none"}document.addEventListener("DOMContentLoaded",function(){let n=document.querySelectorAll(".sign_window__tag"),t=document.querySelector(".sign_window__block-signin"),o=document.querySelector(".sign_window__block-signup");var e=document.querySelector(".sign_window__block-signup .sign_window__support button:nth-child(1)");n.forEach(e=>{e.addEventListener("click",e=>{"Đăng nhập"===e.target.textContent?(n[1].removeAttribute("style"),o.style.display="none",n[0].style.borderBottom="3px solid var(--red-color)",n[0].style.opacity="1",t.style.display="flex"):(n[0].removeAttribute("style"),t.style.display="none",n[1].style.borderBottom="3px solid var(--red-color)",n[1].style.opacity="1",o.style.display="flex")})}),e.addEventListener("click",e=>{n[1].removeAttribute("style"),o.style.display="none",n[0].style.borderBottom="3px solid var(--red-color)",n[0].style.opacity="1",t.style.display="flex"})}),document.addEventListener("DOMContentLoaded",function(){let n=document.querySelector(".sign_window");var e=n.querySelector(".sign_window__tag-block div:nth-child(2) button");let t=document.getElementById("sign_window__signup-form"),o=document.getElementById("sign_window__signin-form"),i=document.querySelectorAll(".sign_window__block-signin .sign_window__alert div"),l=document.querySelectorAll(".sign_window__block-signup .sign_window__alert div");e.addEventListener("click",e=>{n.style.display="none",t.reset(),o.reset(),i.forEach(e=>{e.style.display="none"}),l.forEach(e=>{e.style.display="none"})})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".header_ext__signbutton");let n=document.querySelector(".sign_window");e.addEventListener("click",e=>{n.style.display="block"})}),document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("sign_window__signup-form"),o=document.querySelectorAll(".sign_window__block-signup .sign_window__alert div"),i=document.querySelectorAll(".sign_window__tag"),l=document.querySelector(".sign_window__block-signin"),s=document.querySelector(".sign_window__block-signup"),d=document.querySelector(".sign_window__block-signin .sign_window__email-block input"),r=document.querySelector(".sign_window__block-signin .sign_window__password-block input"),t=(n.addEventListener("submit",function(e){e.preventDefault();e=new FormData(e.target);let t={};e.forEach((e,n)=>{t[n]=e}),fetch("/login/signup",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"ok"!==e.email?o[0].style.display="block":o[0].style.display="none",o[1].style.display="ok"!==e.ten?"block":"none","ok"===e.email&&"ok"===e.ten?(o[2].style.display="block",setTimeout(()=>{i[1].removeAttribute("style"),s.style.display="none",i[0].style.borderBottom="3px solid var(--red-color)",i[0].style.opacity="1",l.style.display="flex",n.reset(),o[2].style.display="none",d.value=t.email,r.value=t.password},1e3)):o[2].style.display="none"}).catch(e=>console.error("Error:",e))}),n.querySelector("#signup_email"));var e=n.querySelector("#signup_name");let a=document.querySelector(".sign_window__block-signup .sign_window__support button:nth-child(2)");e.addEventListener("input",function(e){o[1].style.display="none"}),t.addEventListener("input",function(e){o[0].style.display="none",o[3].style.display="none"}),t.addEventListener("blur",function(e){var n;""!==t.value.trim()?isValidEmail(t.value)?((n={}).email=t.value,fetch("/login/signup/checkEmailExist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{"ok"!==e.status?(a.disabled=!0,o[3].style.display="block"):(a.disabled=!1,o[3].style.display="none")})):(a.disabled=!0,o[3].style.display="block"):(a.disabled=!1,o[3].style.display="none")})}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("sign_window__signin-form");let n=document.querySelectorAll(".sign_window__block-signin .sign_window__alert div");document.querySelector(".sign_window__block-signin .sign_window__support button:nth-child(2)"),document.querySelector(".sign_window__block-signin .sign_window__email-block input"),document.querySelector(".sign_window__block-signin .sign_window__password-block input");e.addEventListener("submit",function(e){e.preventDefault();e=new FormData(e.target);let t={};e.forEach((e,n)=>{t[n]=e}),fetch("/login/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{"ok"!==e.email?n[3].style.display="block":n[3].style.display="none",n[1].style.display="ok"!==e.password?"block":"none","ok"===e.email&&"ok"===e.password?(n[2].style.display="block",setTimeout(()=>{window.location.href=window.location.pathname},1e3)):n[2].style.display="none"}).catch(e=>console.error("Error:",e))})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".header_ext__userInfo");let n=e.querySelector(".header_ext__userInfo-dropdown");e.addEventListener("click",function(e){"none"===n.style.display?n.style.display="block":n.style.display="none"})}),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".header_ext__userInfo-dropdown div:nth-child(2)").addEventListener("click",function(e){let n=window.location.pathname;fetch("/login/signout",{method:"GET"}).then(e=>e.json()).then(e=>{window.location.href=n}).catch(e=>{console.error("Error:",e)})})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sign_window__social a"),n=encodeURIComponent(window.location.pathname);e[0].href="/login/signin/auth/google?returnTo="+n,e[1].href="/login/signin/auth/facebook?returnTo="+n}),document.addEventListener("DOMContentLoaded",function(){let n=document.querySelector(".forgetpassword_block");var e=n.querySelector(".forgetpassword_popup-exit");let t=n.querySelector(".forgetpassword_popup-body"),o=n.querySelectorAll(".forgetpassword_popup-alert div");var i=document.querySelector(".sign_window__block-signin .sign_window__support button:nth-child(1)");e.addEventListener("click",function(e){n.style.display="none",t.reset(),o.forEach(e=>{e.style.display="none"})}),i.addEventListener("click",function(e){"none"===n.style.display?n.style.display="block":n.style.display="none"})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".forgetpassword_popup-body");let t=document.querySelector(".forgetpassword_popup-body input"),o=document.querySelector(".forgetpassword_popup-submit-btn button"),i=document.querySelectorAll(".forgetpassword_popup-alert div");t.addEventListener("blur",function(e){var n;""!==t.value.trim()?((n={}).email=t.value,fetch("/login/signup/checkEmailExist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{"ok"!==e.status?(o.disabled=!0,o.style.cursor="default",i[1].style.display="block"):(o.disabled=!1,o.style.cursor="pointer",i[1].style.display="none")}).catch(e=>console.log(e))):(o.disabled=!1,o.style.cursor="pointer",i[1].style.display="none",i[2].style.display="none",i[3].style.display="none")}),e.addEventListener("submit",function(e){e.preventDefault();var e=t.value,n={};n.email=e,console.log(e),fetch("/login/forgetPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{console.log(e),"not exist"===e.status?(i[0].style.display="none",i[1].style.display="none",i[2].style.display="none",i[3].style.display="block"):(e.status,i[0].style.display="none",i[1].style.display="none",i[2].style.display="block",i[3].style.display="none")}).catch(e=>console.error("Error:",e))})});